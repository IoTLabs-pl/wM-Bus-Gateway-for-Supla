const char* frontend_script = "function e(e=document,t=\"\",r=!1,n=!0){let o=r?\"\":\":not([for])\";Array.from(e.querySelectorAll(\".form-field>label\"+o)).forEach(e=>{let r=e.nextElementSibling,o=[t,...e.textContent.split(\" \")].filter(e=>!!e).join(\"_\").toLowerCase();[[e,\"htmlFor\"],[r,\"id\"],n?[r,\"name\"]:[]].forEach(([e,t])=>e&&(e[t]=o))})}function t(t,r){let n=\"meter_\"+r;return t.querySelector('input[type=\"hidden\"]').name=n,e(t,n,!0,!1),t.querySelector(\"h3\").innerText=\"Meter \"+r,t}function r(){return Array.from(document.querySelectorAll(\".meter.box\")).map(t)}function n(e){return e.querySelectorAll(\".form-field\").forEach((e,t)=>{t<3||e.querySelector(\"button\")?e.querySelectorAll(\"input,select\").forEach(e=>e.value=\"\"):e.remove()}),e}function o(){let e=document.querySelectorAll(\".meter.box\"),r=e[e.length-1],o=[n,c,u,l,t].reduce((t,r)=>r(t,e.length),r.cloneNode(!0));return r.after(o),o}function l(e){return e.querySelectorAll(\"label[data-indexable]\").forEach(e=>{e.querySelector(\"em\")||(e.innerHTML+=\" <em>(%d-th)</em>\")}),e}function c(e){e.querySelector(\"button\").addEventListener(\"click\",()=>{e.remove(),r()});let t=e.querySelector('input[type=\"hidden\"]'),n=Array.from(e.querySelectorAll(\"input,select\")).filter(e=>e!==t),o=()=>{t.value=n.map(e=>e.value).join(\",\")};return n.forEach(e=>{e.addEventListener(\"input\",o)}),o(),e}function u(e){return e.querySelector(\"h3\").addEventListener(\"click\",()=>{e.classList.toggle(\"collapsed\")}),e}window.addEventListener(\"DOMContentLoaded\",function(){document.getElementById(\"add_meter\").addEventListener(\"click\",o),r().map(c).map(l),e()});";
